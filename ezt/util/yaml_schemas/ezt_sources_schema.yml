type: object
properties:
  sources:
    type: array
    items:
      type: object
      properties:
        name:
          type: string
        filesystem:
          enum: [local, s3]
        path_type:
          enum: [file, folder]
        format:
          enum: [csv, parquet]
      required:
        - name
        - filesystem
        - path_type
        - format
      allOf:
          - if:
              properties:
                filesystem:
                  const: local
              required:
                - filesystem
            then:
              properties:
                path:
                  type: string
              required:
                - path
          - if:
              properties:
                filesystem:
                  const: s3
                path_type:
                  const: file
              required:
                - filesystem
                - path_type
            then:
              properties:
                bucket:
                  type: string
                filename:
                  type: string
              required:
                - bucket
                - filename
          - if:
              properties:
                filesystem:
                  const: s3
                path_type:
                  const: folder
              required:
                - filesystem
                - path_type
            then:
              properties:
                bucket:
                  type: string
                folder:
                  type: string
              required:
                - bucket
                - folder
required:
  - sources







